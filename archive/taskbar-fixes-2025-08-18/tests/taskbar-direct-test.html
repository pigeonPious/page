<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Taskbar Direct Test</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<h1>Taskbar Direct Loading Test</h1>
<div id="debug"></div>

<div id="post-content">
  <h2 id="post-title">Test Content</h2>
  <div id="post-date">-</div>
</div>

<script src="modules/core.js?v=20250821"></script>
<script src="modules/posts.js?v=20250821"></script>
<script src="modules/navigation.js?v=20250821"></script>
<script src="modules/editor.js?v=20250821"></script>
<script src="modules/theme.js?v=20250821"></script>
<script src="modules/taskbar.js?v=20250821"></script>
<script src="modules/console.js?v=20250821"></script>
<script src="modules/app.js?v=20250821"></script>

<script>
function debug(msg) {
  const d = document.getElementById('debug');
  d.innerHTML += new Date().toLocaleTimeString() + ': ' + msg + '<br>';
  console.log(msg);
}

debug('Scripts loaded, checking state...');

setTimeout(() => {
  debug('ppPage available: ' + !!window.ppPage);
  debug('TaskbarModule available: ' + !!window.TaskbarModule);
  
  if (window.ppPage) {
    const taskbarModule = window.ppPage.getModule('taskbar');
    debug('Taskbar module registered: ' + !!taskbarModule);
  }
  
  const menuBar = document.querySelector('.menu-bar');
  debug('Menu bar in DOM: ' + !!menuBar);
  
  if (!menuBar && window.TaskbarModule) {
    debug('Manually calling TaskbarModule.init()...');
    window.TaskbarModule.init();
    
    setTimeout(() => {
      const menuBarAfter = document.querySelector('.menu-bar');
      debug('Menu bar after manual init: ' + !!menuBarAfter);
    }, 500);
  }
}, 2000);
</script>

</body>
</html>
