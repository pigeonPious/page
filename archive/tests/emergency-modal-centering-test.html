<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modal Centering Emergency Test</title>
    <style>
        body {
            font-family: system-ui, -apple-system, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background: #1a1a1a;
            color: #e8e8e8;
        }
        
        .test-button {
            display: inline-block;
            padding: 15px 30px;
            margin: 10px;
            background: #0066cc;
            color: white;
            text-decoration: none;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
        }
        
        .test-button:hover {
            background: #0052a3;
        }

        /* EMERGENCY MODAL STYLES - NO EXTERNAL CSS INTERFERENCE */
        .emergency-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(0,0,0,0.7);
            z-index: 999999;
            justify-content: center;
            align-items: center;
            margin: 0;
            padding: 0;
            border: none;
            outline: none;
            transform: none;
            box-sizing: border-box;
        }

        .emergency-modal.show {
            display: flex;
        }

        .emergency-modal-content {
            background: #2a2a2a;
            color: #e8e8e8;
            border: 1px solid #555;
            border-radius: 8px;
            padding: 30px;
            max-width: 80vw;
            max-height: 80vh;
            overflow-y: auto;
            position: relative;
            margin: 0 auto;
            box-shadow: 0 8px 32px rgba(0,0,0,0.5);
            text-align: center;
        }

        .close-test-btn {
            position: absolute;
            top: 10px;
            right: 15px;
            background: none;
            border: none;
            color: #e8e8e8;
            font-size: 24px;
            cursor: pointer;
        }

        .close-test-btn:hover {
            color: #ff4444;
        }

        h1 {
            color: #4CAF50;
            text-align: center;
            margin-bottom: 30px;
        }

        .status {
            background: #333;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
        }

        .warning {
            background: #664d00;
            color: #ffcc00;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
            border-left: 4px solid #ffcc00;
        }
    </style>
</head>
<body>
    <h1>üö® Emergency Modal Centering Test</h1>
    
    <div class="warning">
        <strong>‚ö†Ô∏è CRITICAL ISSUE:</strong> The modal is still appearing offset left and up, only bottom-right corner visible. 
        This test will help us identify if the issue is with external CSS or our modal implementation.
    </div>

    <div class="status">
        <h2>üß™ Test Plan</h2>
        <p>This page has NO external CSS dependencies (no style.css import). 
        If the modal still appears offset here, the issue is in our JavaScript logic.
        If it works here but not in simple-editor.html, the issue is CSS conflicts.</p>
    </div>

    <div style="text-align: center; margin: 40px 0;">
        <button class="test-button" onclick="testEmergencyModal()">
            üé≠ Test Emergency Modal (No External CSS)
        </button>
        
        <button class="test-button" onclick="testSimpleEditorModal()">
            üîß Open Simple Editor in New Window
        </button>
    </div>

    <div class="status">
        <h3>üìä Expected Results:</h3>
        <ul>
            <li><strong>If emergency modal centers properly:</strong> Issue is CSS conflicts in simple-editor.html</li>
            <li><strong>If emergency modal also appears offset:</strong> Issue is in our JavaScript modal logic</li>
            <li><strong>If both modals are offset:</strong> Possible browser or viewport issue</li>
        </ul>
    </div>

    <!-- Emergency Test Modal -->
    <div id="emergencyModal" class="emergency-modal">
        <div class="emergency-modal-content">
            <button class="close-test-btn" onclick="closeEmergencyModal()">&times;</button>
            <h2>üéØ Emergency Modal Test</h2>
            <p><strong>SUCCESS!</strong> This modal is properly centered!</p>
            <p>This means the issue is CSS conflicts in simple-editor.html, NOT our JavaScript logic.</p>
            <p>Position: Fixed center with flexbox</p>
            <p>No external CSS interference</p>
            <br>
            <button class="test-button" onclick="closeEmergencyModal()">Close Test Modal</button>
        </div>
    </div>

    <script>
        function testEmergencyModal() {
            console.log('üß™ Testing emergency modal...');
            const modal = document.getElementById('emergencyModal');
            
            // Apply the exact same logic as simple-editor
            modal.classList.add('show');
            
            console.log('‚úÖ Emergency modal should be visible and centered');
            
            // Log modal position for debugging
            setTimeout(() => {
                const rect = modal.getBoundingClientRect();
                console.log('üìä Emergency Modal Position:');
                console.log(`   x: ${rect.x}, y: ${rect.y}`);
                console.log(`   width: ${rect.width}, height: ${rect.height}`);
                console.log(`   viewport: ${window.innerWidth}x${window.innerHeight}`);
                
                const centerX = window.innerWidth / 2;
                const centerY = window.innerHeight / 2;
                const modalCenterX = rect.x + rect.width / 2;
                const modalCenterY = rect.y + rect.height / 2;
                
                console.log(`   modal center: ${modalCenterX}, ${modalCenterY}`);
                console.log(`   viewport center: ${centerX}, ${centerY}`);
                console.log(`   difference: x=${Math.abs(modalCenterX - centerX)}, y=${Math.abs(modalCenterY - centerY)}`);
            }, 100);
        }

        function closeEmergencyModal() {
            const modal = document.getElementById('emergencyModal');
            modal.classList.remove('show');
        }

        function testSimpleEditorModal() {
            window.open('simple-editor.html', '_blank', 'width=1200,height=800');
        }

        // Close modal when clicking outside
        document.addEventListener('click', (e) => {
            if (e.target.classList.contains('emergency-modal')) {
                closeEmergencyModal();
            }
        });

        // Close modal with escape key
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                closeEmergencyModal();
            }
        });
    </script>
</body>
</html>
