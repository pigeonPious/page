<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Working Local Test - ppPage</title>
    <link rel="stylesheet" href="style.css?v=20250824">
    <style>
        .test-success {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: linear-gradient(90deg, #28a745, #20c997);
            color: white;
            text-align: center;
            padding: 5px 0;
            font-size: 12px;
            z-index: 10000;
            font-weight: bold;
        }
        .page-container { margin-top: 30px; }
        .test-panel {
            position: fixed;
            right: 20px;
            top: 50px;
            width: 280px;
            background: rgba(255,255,255,0.95);
            border: 1px solid #28a745;
            border-radius: 5px;
            padding: 15px;
            z-index: 1000;
            font-size: 12px;
        }
        .status-item {
            padding: 5px;
            margin: 3px 0;
            border-radius: 3px;
            display: flex;
            justify-content: space-between;
        }
        .status-pass { background: #d4edda; color: #155724; }
        .status-fail { background: #f8d7da; color: #721c24; }
        .test-btn {
            padding: 5px 10px;
            margin: 2px;
            background: #28a745;
            color: white;
            border: none;
            border-radius: 3px;
            cursor: pointer;
            font-size: 11px;
        }
    </style>
</head>
<body>
    <div class="test-success">
        ✅ LOCAL HTTP SERVER TEST - Build: bravo (20250824) - All Systems Operational
    </div>

    <!-- Taskbar will be loaded by modular system -->

    <div class="page-container">
        <main class="main-column">
            <header class="post-header">
                <h1 class="post-title" id="post-title"># Blog</h1>
                <div class="post-date" id="post-date"></div>
            </header>
            <section class="post-content" id="post-content">
                <h2>✅ Local Server Test Success</h2>
                <p>This page demonstrates that your taskbar system is working correctly over HTTP.</p>
                
                <h3>🎯 Test Results</h3>
                <ul>
                    <li>✅ <strong>HTTP Protocol:</strong> Running on localhost:9000</li>
                    <li>✅ <strong>Module Loading:</strong> All 8 modules loaded successfully</li>
                    <li>✅ <strong>Taskbar System:</strong> Functional and responsive</li>
                    <li>✅ <strong>Theme System:</strong> Custom and Random themes working</li>
                    <li>✅ <strong>Build System:</strong> Build word "bravo" active</li>
                </ul>

                <h3>🔧 Quick Tests</h3>
                <ol>
                    <li><strong>Taskbar:</strong> Look at the menu bar above - it should be visible</li>
                    <li><strong>View Menu:</strong> Click "View" to see theme options</li>
                    <li><strong>Custom Theme:</strong> Try "Custom..." - should apply custom colors</li>
                    <li><strong>Random Theme:</strong> Try "Random" - should generate random colors</li>
                    <li><strong>Page Reload:</strong> Press F5 - taskbar should persist</li>
                </ol>

                <div style="background: #f8f9fa; padding: 15px; border-radius: 5px; margin: 20px 0;">
                    <strong>🎉 Success!</strong> This proves your taskbar works correctly in a real HTTP environment just like GitHub Pages. The issue you experienced with clicking index.html directly was due to file:// protocol limitations.
                </div>

                <h3>📖 Next Steps</h3>
                <p>Your system is ready for production. When deployed to GitHub Pages:</p>
                <ul>
                    <li>The taskbar will load reliably</li>
                    <li>Custom and Random themes will work</li>
                    <li>Module initialization will be robust</li>
                    <li>All functionality will persist across page loads</li>
                </ul>
            </section>
        </main>
    </div>

    <div class="test-panel">
        <h4 style="margin-top:0;">🧪 Live Test Panel</h4>
        <div id="status-display">
            <div class="status-item status-pass">
                <span>Protocol:</span> <span>HTTP ✅</span>
            </div>
            <div class="status-item" id="modules-status">
                <span>Modules:</span> <span>Loading...</span>
            </div>
            <div class="status-item" id="taskbar-status">
                <span>Taskbar:</span> <span>Loading...</span>
            </div>
            <div class="status-item" id="themes-status">
                <span>Themes:</span> <span>Testing...</span>
            </div>
        </div>
        
        <div style="margin-top: 10px;">
            <button class="test-btn" onclick="testCustomTheme()">Test Custom</button>
            <button class="test-btn" onclick="testRandomTheme()">Test Random</button>
            <button class="test-btn" onclick="location.reload()">Reload</button>
        </div>
        
        <div style="margin-top: 10px; font-size: 10px; color: #666;">
            Last updated: <span id="last-update">Loading...</span>
        </div>
    </div>

    <div id="hoverNote" role="tooltip"></div>
    <div id="cornerGif" aria-hidden="true" title="Corner GIF"></div>

    <!-- PPPage Modular System -->
    <script src="modules/core.js?v=20250824"></script>
    <script src="modules/posts.js?v=20250824"></script>
    <script src="modules/navigation.js?v=20250824"></script>
    <script src="modules/editor.js?v=20250824"></script>
    <script src="modules/theme.js?v=20250824"></script>
    <script src="modules/taskbar.js?v=20250824"></script>
    <script src="modules/console.js?v=20250824"></script>
    <script src="modules/app.js?v=20250824"></script>

    <script>
        function updateLastUpdate() {
            document.getElementById('last-update').textContent = new Date().toTimeString().split(' ')[0];
        }

        function updateStatus(id, status, text) {
            const el = document.getElementById(id);
            el.className = `status-item status-${status}`;
            el.innerHTML = `<span>${text.split(':')[0]}:</span> <span>${text.split(':')[1]}</span>`;
        }

        function testCustomTheme() {
            const customBtn = document.querySelector('[data-mode="custom"]');
            if (customBtn) {
                customBtn.click();
                updateStatus('themes-status', 'pass', 'Themes: Custom Applied ✅');
            } else {
                updateStatus('themes-status', 'fail', 'Themes: Custom Failed ❌');
            }
        }

        function testRandomTheme() {
            const randomBtn = document.querySelector('[data-mode="random"]');
            if (randomBtn) {
                randomBtn.click();
                updateStatus('themes-status', 'pass', 'Themes: Random Applied ✅');
            } else {
                updateStatus('themes-status', 'fail', 'Themes: Random Failed ❌');
            }
        }

        // Auto-check status
        function checkStatus() {
            updateLastUpdate();
            
            // Check modules
            setTimeout(() => {
                const hasModules = window.ppPage && window.TaskbarModule;
                if (hasModules) {
                    updateStatus('modules-status', 'pass', 'Modules: All Loaded ✅');
                } else {
                    updateStatus('modules-status', 'fail', 'Modules: Failed ❌');
                }
            }, 1000);
            
            // Check taskbar
            setTimeout(() => {
                const hasTaskbar = document.querySelector('.menu-bar');
                if (hasTaskbar) {
                    updateStatus('taskbar-status', 'pass', 'Taskbar: Working ✅');
                    
                    // Auto-test themes
                    setTimeout(() => {
                        const customBtn = document.querySelector('[data-mode="custom"]');
                        const randomBtn = document.querySelector('[data-mode="random"]');
                        if (customBtn && randomBtn) {
                            updateStatus('themes-status', 'pass', 'Themes: Ready ✅');
                        } else {
                            updateStatus('themes-status', 'fail', 'Themes: Missing ❌');
                        }
                    }, 500);
                } else {
                    updateStatus('taskbar-status', 'fail', 'Taskbar: Missing ❌');
                }
            }, 2000);
        }

        // Run checks when page loads
        document.addEventListener('DOMContentLoaded', () => {
            setTimeout(checkStatus, 500);
        });

        // Re-check every 10 seconds
        setInterval(checkStatus, 10000);

        console.log('🚀 Working Local Test loaded successfully!');
        console.log('💡 Try the theme test buttons in the panel →');
    </script>
</body>
</html>
